!function(){"use strict";var methodsMapping,siteProtocol,defaults,methodsMapping={AUTH__LOGIN:{methodName:"login",endpoint:"webservices/login.json"},AUTH__LOGIN_REMOTE:{methodName:"loginRemote",endpoint:"webservices/remote_login.json"},AUTH__LOGIN_UUID:{methodName:"loginUUID",endpoint:"webservices/uuid_login.json"},AUTH__LOGOUT:{methodName:"logout",endpoint:"webservices/logout.json"},VENDOR__GET_PROFILE__USER:{methodName:"TTB.getUserProfile",endpoint:"webservices/get_vendor_user.json"},VENDOR__GET_PROFILE__VENDOR:{methodName:"TTB.getVendorProfile",endpoint:"webservices/get_vendor/{{partnerKey}}.json"},SPONSOR__GET_LIST:{methodName:"TTB.getSponsors",endpoint:"webservices/get_sponsors.json"},SPONSOR__GET_SELECTION:{methodName:"TTB.getSponsorSelection",endpoint:"webservices/get_sponsor_selection.json"},SPONSOR__SAVE_SELECTION:{methodName:"saveSponsorSelection",endpoint:"webservices/save_sponsor_selection.json"},SPONSOR__CLEAR_SELECTION:{methodName:"clearSponsorSelection",endpoint:"webservices/clear_sponsor_selection.json"},SPONSOR__ACCEPT_TOS:{methodName:"TTB.getSponsors",endpoint:"webservices/accept_tos/accept.json"},SEARCH_PROPERTY__PARCEL:{methodName:"searchByParcelNumber",endpoint:"webservices/search_parcel_number.json"},SEARCH_PROPERTY__ADDRESS:{methodName:"searchBySiteAddress",endpoint:"webservices/search_property/ttb.json"},SEARCH_PROPERTY__OWNER:{methodName:"searchByOwnerName",endpoint:"webservices/search_owner_name/ttb.json"},REPORT__ORDER:{methodName:"orderReport",endpoint:"webservices/order_report.json"},REPORT__GET_TYPES:{methodName:"getTypesReport",endpoint:"webservices/types_report.json"},PROPERTY__COMPS:{methodName:"propertyComps",endpoint:"webservices/property_comps.json"},PROPERTY__DETAILS:{methodName:"propertyDetails",endpoint:"webservices/property_details.json"},FARM__PE__CHECK_STATUS:{methodName:"checkPEFarmStatus",endpoint:"webservices/pe_farm_status/{{farmId}}.json"},FARM__GET_DETAILS:{methodName:"getFarmProperties",endpoint:"webservices/get_farm/{{farmId}}.json"},FARM__GET_LIST:{methodName:"getFarmsList",endpoint:"webservices/get_farm_metainfo.json"},GLOBAL_SEARCH__PROPERTIES:{methodName:"globalSearch",endpoint:"webservices/global_search.json"},GLOBAL_SEARCH__COUNT:{methodName:"globalSearchCount",endpoint:"webservices/global_search_count.json"},GLOBAL_SEARCH__FIELDS:{methodName:"getSearchFields",endpoint:"webservices/get_search_fields.json"}},siteProtocol="https:",defaults={protocol:siteProtocol,devPortSandbox:"9000",devPortLanding:"9001",devPortExport:"9002",sponsor:{name:"direct",title:"Benutech",site:"https://direct.titletoolbox.com/",logoURL:"https://s3-us-west-1.amazonaws.com/titletoolbox/company+logos/Benutech/Benute+Logo.png",TOSURL:"https://direct.api.titletoolbox.com/pages/tos/direct_tos"},enabledFeatures:"iLookupWidget",baseURLPattern:"https://{{sponsorName}}.api.titletoolbox.com/",scopedBootstrap:!1,classScopedBootstrap:"scoped-bootstrap",classScopedBootstrapHtml:"scoped-bootstrap--html",classScopedBootstrapBody:"scoped-bootstrap--body",debug:!1,sdkPrefix:"ttb-sdk",sessionKeyName:"TTBSID",sessionKeySkippedMethods:[methodsMapping.AUTH__LOGIN.methodName,methodsMapping.AUTH__LOGIN_REMOTE.methodName,methodsMapping.VENDOR__GET_PROFILE__USER.methodName,methodsMapping.VENDOR__GET_PROFILE__VENDOR.methodName,methodsMapping.SPONSOR__GET_SELECTION.methodName],autoFillAttr:"data-ttb-field",localStorageNames:{connect__selectedSponsor:"connect--selected-sponsor"},dataTableConfig:{CDNs:{CSS:"https://ttb-export.herokuapp.com/libs/jquery-data-tables/jquery.dataTables.min.css",JS:"https://ttb-export.herokuapp.com/libs/jquery-data-tables/jquery.dataTables.min.js"},options:{}},iframeOptions:{height:"600px"},modalOptions:{sizeClass:"modal-lg",autoDestroy:!0},errorMessages:{GENERAL__CONNECT_FAILED:"Failed in connecting to TitleToolbox",CONNECT__NO_SPONSOR:"The data related features are supported by various partners. Please click Connect to select a partner."},sponsorItemTemplate:["<tr>",' <th scope="row">{{count}}</th>'," <td>",'  <a href="{{websiteURL}}" target="_blank">','   <img src="{{logoUrl}}" class="img-responsive" alt="Sponsor Logo" >',"  </a>"," </td>"," <td>","  <strong>{{name}}</strong> <br>","  {{websiteName}}"," </td>",' <td class="text-center">',"  {{sponsorActionButton}}"," </td>","</tr>"].join(""),sponsorItemSelectedButton:['<button type="button" class="btn btn-success ttb-sdk--select-sponsor--selected" disabled>',' \x3c!-- <span class="ttb-sdk--common--icon ttb-sdk--common--icon-cross"></span> --\x3e',' <span class="ttb-sdk--common--icon ttb-sdk--common--icon-check"></span>'," Selected","</button>"].join(""),sponsorItemSelectButton:['<button type="button" class="btn btn-primary"',' data-sponsor-name="{{sponsorName}}"',' data-sponsor-title="{{sponsorTitle}}"',' data-sponsor-site="{{sponsorSite}}"',' data-sponsor-logo="{{sponsorLogoURL}}"',' data-sponsor-tos="{{sponsorTOSURL}}">',"  Select","</button>"].join(""),sponsorListTemplate:['<h3 class="ttb-sdk--select-sponsor--heading">{{resultsMessage}}</h3>','<div style="overflow-x: auto">','<table class="table ttb-sdk--selected-sponsor--list">'," <thead>","  <tr>",'   <th scope="col" width="80" class="text-center">#</th>','   <th scope="col" width="80" class="text-center">Logo</th>','   <th scope="col" width="80" class="text-center">Name</th>','   <th scope="col" width="80" class="text-center"></th>',"  </tr>"," <thead>",' <tbody class="align-items-center">{{sponsorsMarkup}}</tbody>',"</table>","</div>"].join(""),modalTemplate:['<div id={{modalId}} class="ttb-sdk--modal modal" tabindex="-1" role="dialog" aria-labelledby="{{modalId}}-label" aria-hidden="true">',' <div class="modal-dialog {{sizeClass}}" role="document">','  <div class="modal-content">','   <div class="modal-header">','    <button type="button" class="close" data-dismiss="modal" aria-label="Close" title="Close">','     <span aria-hidden="true">&times;</span>',"    </button>",'    <h4 class="modal-title" id="{{modalId}}-label">{{title}}</h4>',"   </div>",'   <div class="modal-body">',"    {{bodyContent}}","   </div>","  </div>"," </div>","</div>"].join("")};window.TTB=function(e){this.config=e,window.TTB.instancesCount=window.TTB.instancesCount||0,window.TTB.instancesCount++,this.instanceId=window.TTB.instancesCount,this.baseURLPattern=e.baseURLPattern||defaults.baseURLPattern;var t=e.sponsor||window.TTB._getLocal(defaults.localStorageNames.connect__selectedSponsor)||window.TTB.utilCopy(defaults.sponsor),o=this.setSponsor(t);this.baseURL=e.baseURL||o,this.autoFillAttr=e.autoFillAttr||defaults.autoFillAttr,this.scopedBootstrap=e.scopedBootstrap||defaults.scopedBootstrap,this.debug=e.debug||defaults.debug,window.TTB.scopedBootstrap=window.TTB.scopedBootstrap?window.TTB.scopedBootstrap:this.scopedBootstrap,this._log(["TTB SDK instantiated. | version: ",window.TTB.version])},window.TTB.version="1.20.0",window.TTB.instancesCount=0,window.TTB.debug=!1,window.TTB._log=function(e){window.TTB.debug&&console.log.apply(console,[defaults.sdkPrefix+" : static :"].concat(e))},window.TTB._createDefaultInstance=function(e,t){return new TTB({partnerKey:e||defaults.partnerKey,sponsor:t})},window.TTB._getLocal=function(e){try{var t=window.localStorage.getItem(defaults.sdkPrefix+"--"+e);switch(t){case"null":return null;case"undefined":return;default:return"{"===t[0]||"["===t[0]?JSON.parse(t):t}}catch(e){return null}},window.TTB._setLocal=function(e,t){try{var o="object"==typeof t?JSON.stringify(t):t;return window.localStorage.setItem(defaults.sdkPrefix+"--"+e,o),!0}catch(e){return!1}},window.TTB._modal=function(e){var t,o;return e.id=e.id||defaults.sdkPrefix+"--"+Date.now(),e.sizeClass=e.sizeClass||defaults.modalOptions.sizeClass,e.autoDestroy=null!=e.autoDestroy?e.autoDestroy:defaults.modalOptions.autoDestroy,o=defaults.modalTemplate.replace(/\{\{modalId}}/g,e.id).replace("{{sizeClass}}",e.sizeClass).replace("{{title}}",e.title).replace("{{bodyContent}}",e.bodyContent),t=$(o).appendTo(document.body),e.onShown&&t.on("shown.bs.modal",e.onShown),t.on("show.bs.modal",function(){window.TTB.scopedBootstrap&&($("html").addClass(defaults.classScopedBootstrapHtml),$("body").addClass(defaults.classScopedBootstrapBody));e.onBeforeShow&&e.onBeforeShow()}),t.on("hide.bs.modal",function(){window.TTB.scopedBootstrap&&($("html").removeClass(defaults.classScopedBootstrapHtml),$("body").removeClass(defaults.classScopedBootstrapBody));e.onBeforeClose&&e.onBeforeClose()}),e.autoDestroy?t.on("hidden.bs.modal",function(){e.onClose&&e.onClose(),t.remove()}):e.onClose&&t.on("hide.bs.modal",e.onClose),t},window.TTB.utilIframeModal=function(e,t){var o,s;return t.height=t.height||defaults.iframeOptions.height,(s={}).src=t.origin+t.pathname+"?hostOrigin={{hostOrigin}}".replace("{{hostOrigin}}",window.location.origin),t.params&&$.each(t.params,function(e,t){s.src+=t?"&"+e+"="+encodeURIComponent(t):""}),s.iframeTemplate=['<iframe src="{{src}}" id="{{iframeId}}" name="{{iframeId}}" width="100%" height="{{height}}"></iframe>'].join("").replace("{{src}}",s.src).replace("{{height}}",t.height).replace(/\{\{iframeId}}/g,t.id),t.onMessage&&(window.addEventListener("message",n,!1),s.modalOptionsOnClose=e.onClose,e.onClose=function(){window.TTB._log(["utilIframeModal: onClose"]),s.modalOptionsOnClose&&s.modalOptionsOnClose(),window.removeEventListener("message",n)}),e.bodyContent=[e.bodyContent||"",s.iframeTemplate].join(""),(o=window.TTB._modal(e)).modal({}),o;function n(e){window.TTB._log(["utilIframeModal: receiveMessage: origin:",e.origin]),e.origin===t.origin&&(window.TTB._log(["utilIframeModal: receiveMessage: event: ",e]),t.onMessage(e.data,e))}},window.TTB.utilGenerateUniqueId=function(e,t){return defaults.sdkPrefix+"--"+(e||"")+Date.now()+"-"+parseInt(1e5*Math.random())+(t||"")},window.TTB.utilCapitalize=function(e){return(e+="").split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}).join(" ")},window.TTB.utilLoadDataTable=function(t){$(document).DataTable?(window.TTB._log(["utilLoadDataTable: data-table: already available: init"]),t&&t()):(window.TTB._log(["utilLoadDataTable: data-table: not available yet: loading files:  CSS added."]),$(document.head).append('<link type="text/css" rel="stylesheet" href="'+defaults.dataTableConfig.CDNs.CSS+'"/>'),$.ajax({method:"GET",url:defaults.dataTableConfig.CDNs.JS,dataType:"script",cache:!0,success:function(e){window.TTB._log(["utilLoadDataTable: data-table: inject JS: success:"]),t&&setTimeout(t,0)},error:function(e){window.TTB._log(["utilLoadDataTable: data-table: inject JS: failure: ",e])}}))},window.TTB.utilRenderTable=function(s,n){var e,a;function i(){window.TTB._log(["utilRenderTable: activateSelectRecord:"]),e.find("table tr").removeClass(a.classSelected).filter('[data-record-index="'+a.selectedRecordIndex+'"]').addClass(a.classSelected)}return(a={selectedRecordIndex:void 0,dataTableInstance:void 0,classSelected:"ttb-sdk--table--record-selected",tableId:void 0,headings:void 0,list:void 0,tableTemplate:void 0,tableMarkup:void 0}).tableId=window.TTB.utilGenerateUniqueId("table-"),a.tableTemplate=['<div class="table-responsive" id="{{tableId}}">',' <table class="display">',"  <thead>","  {{headings}}","  </thead>","  <tbody>","  {{list}}","  </tbody>"," </table>","</div>"].join(""),e=$(n.containerSelector).hide(),a.headings=["<tr>","<td></td>",n.columns.map(function(e){return"<th>{{label}}</th>".replace("{{label}}",e.label)}).join(""),"</tr>"],a.list=s.map(function(t,e){return['<tr data-record-index="'+e+'">','<td><button class="btn btn-primary ttb-sdk--instant-lookup--select">Select</button></td>',n.columns.map(function(e){return"<td>{{value}}</td>".replace("{{value}}",t[e.fieldName]||"-")}).join(""),"</tr>"].join("")}),a.tableMarkup=a.tableTemplate.replace("{{tableId}}",a.tableId).replace("{{headings}}",a.headings.join("")).replace("{{list}}",a.list.join("")),e.empty().append(a.tableMarkup),e.find("table").on("click",".ttb-sdk--instant-lookup--select",function(e){var t,o;t=$(this).closest("tr"),a.selectedRecordIndex=+t.attr("data-record-index"),i(),o=s[a.selectedRecordIndex],window.TTB._log(["utilRenderTable: onRecordSelect: select: record:",a.selectedRecordIndex,o]),n.onSelect(o)}),window.TTB.utilLoadDataTable(function(){window.TTB._log(["utilRenderTable: initializeDataTable: init"]),a.dataTableInstance=e.find("table").DataTable(),a.dataTableInstance.on("draw.dt",i),e.show(),n.onInit(a.dataTableInstance)}),e},window.TTB.utilBuildSponsorInfo=function(e){return{name:e.vertical_name,title:e.company_info.company_name,site:e.site_url,logoURL:e.company_info.logo_url,TOSURL:e.TOS_content}},window.TTB.utilBuildFullAddress=function(e){return(e.sa_site_house_nbr?e.sa_site_house_nbr+" ":"")+(e.sa_site_street_name?e.sa_site_street_name+" ":"")+(e.sa_site_suf?e.sa_site_suf+", ":"")+(e.sa_site_city?e.sa_site_city+", ":"")+(e.sa_site_state?e.sa_site_state+" ":"")+(e.sa_site_zip?e.sa_site_zip:"")},window.TTB.getUserProfile=function(e,t){var o=window.TTB._createDefaultInstance(t),s={method:"POST",data:JSON.stringify(e),xhrFields:{withCredentials:!1}};return o._ajax(s,methodsMapping.VENDOR__GET_PROFILE__USER)},window.TTB.getVendorProfile=function(e){var t=window.TTB._createDefaultInstance(e),o={url:(t.baseURL+methodsMapping.VENDOR__GET_PROFILE__VENDOR.endpoint).replace("{{partnerKey}}",e),method:"GET",xhrFields:{withCredentials:!1}};return t._ajax(o,methodsMapping.VENDOR__GET_PROFILE__VENDOR)},window.TTB.getSponsors=function(e,t){var o=window.TTB._createDefaultInstance(t),s={method:"POST",data:JSON.stringify(e)};return o._ajax(s,methodsMapping.SPONSOR__GET_LIST)},window.TTB.getSponsorSelection=function(e,t){var o=window.TTB._createDefaultInstance(e),s={method:"POST",data:JSON.stringify(t)};return o._ajax(s,methodsMapping.SPONSOR__GET_SELECTION)},window.TTB.showSelectSponsor=function(s,n){var a="ttb-sdk--select-sponsor",i="<h3>{{message}}</h3>",r=this._modal({id:a,title:"Please select a Company to Partner with on your Data Integration",bodyContent:i.replace("{{message}}","Retrieving list of all available Companies ...")});return window.TTB.getSponsors(s.getSponsorsPayload,s.partnerKey).done(function(e){var t,o={sponsorsData:void 0,bodyMarkup:void 0,sponsorMarkup:void 0,sponsorsEmailMarkup:void 0,sponsorsZipMarkup:void 0,sponsorTOSTemplate:void 0,sponsorTOSMarkup:void 0,$sponsorTOSModal:void 0,resultsMessage:void 0,tempTargetList:void 0};if("OK"!==e.response.status)return window.TTB._log(["showSelectSponsor: getSponsors: error in response: ",e.response]),t=i.replace("{{message}}","Failed in retrieving companies list."),r.find(".modal-body").html(t),void(n.onError&&n.onError(e.response.data[0],r));o.sponsorsData=e.response.data,o.bodyMarkup=[],o.sponsorsEmailMarkup=[],o.sponsorsZipMarkup=[],o.sponsorsOtherMarkup=[],$.each(o.sponsorsData,function(e,t){switch(o.isCurrentSponsor=s.selectedSponsor&&s.selectedSponsor.name===t.vertical_name,o.isCurrentSponsor?o.sponsorActionButton=defaults.sponsorItemSelectedButton:o.sponsorActionButton=defaults.sponsorItemSelectButton.replace("{{sponsorName}}",t.vertical_name).replace("{{sponsorTitle}}",t.company_info.company_name).replace("{{sponsorSite}}",t.site_url).replace("{{sponsorLogoURL}}",t.company_info.logo_url).replace("{{sponsorTOSURL}}",t.TOS_content),o.sponsorSiteName=(t.company_info.company_website||"").replace(/http:\/\/www\.|https:\/\/www\./,""),o.sponsorMarkup=defaults.sponsorItemTemplate.replace("{{logoUrl}}",t.company_info.logo_url).replace("{{name}}",t.company_info.company_name).replace(/(\{\{websiteURL}})/g,t.company_info.company_website||"javascript:").replace(/(\{\{websiteName}})/g,o.sponsorSiteName).replace("{{sponsorActionButton}}",o.sponsorActionButton),t.match.type){case"email":o.tempTargetList=o.sponsorsEmailMarkup;break;case"zip":o.tempTargetList=o.sponsorsZipMarkup;break;case null:o.tempTargetList=o.sponsorsOtherMarkup;break;default:return void window.TTB._log(["showSelectSponsor: unknown sponsor.match.type: ",t.match.type])}o.sponsorMarkup=o.sponsorMarkup.replace("{{count}}",o.tempTargetList.length+1),o.tempTargetList.push(o.sponsorMarkup)}),o.sponsorsEmailMarkup.length&&(o.resultsMessage="It appears you <strong>currently partner</strong> with the following Companies ...",o.bodyMarkup.push(defaults.sponsorListTemplate.replace("{{resultsMessage}}",o.resultsMessage).replace("{{sponsorsMarkup}}",o.sponsorsEmailMarkup.join("")))),o.sponsorsZipMarkup.length&&(o.resultsMessage="The following Companies are <strong>available Partners</strong> in the <strong>{{zipCode}}</strong> zip code.".replace("{{zipCode}}",s.getSponsorsPayload.zipCode),o.bodyMarkup.push(defaults.sponsorListTemplate.replace("{{resultsMessage}}",o.resultsMessage).replace("{{sponsorsMarkup}}",o.sponsorsZipMarkup.join("")))),!o.sponsorsOtherMarkup.length||o.sponsorsZipMarkup.length||o.sponsorsEmailMarkup.length||(1===o.sponsorsData.length&&"leads"===o.sponsorsData[0].vertical_name?o.resultsMessage=["There is currently not a Company as a participating Partner in Zip Code <strong>{{zipCode}}</strong>. ","The Data will be proudly supplied by Benutech Inc."].join("").replace("{{zipCode}}",s.getSponsorsPayload.zipCode):o.resultsMessage="The following Companies are available Partners.",o.bodyMarkup.push(defaults.sponsorListTemplate.replace("{{resultsMessage}}",o.resultsMessage).replace("{{sponsorsMarkup}}",o.sponsorsOtherMarkup.join("")))),r.find(".modal-body").html(o.bodyMarkup.join("")),$("#"+a+" tbody").on("click","button",function(e){var t={name:$(this).attr("data-sponsor-name"),title:$(this).attr("data-sponsor-title"),site:$(this).attr("data-sponsor-site"),logoURL:$(this).attr("data-sponsor-logo"),TOSURL:$(this).attr("data-sponsor-tos")};"null"===t.site&&(t.site=null),window.TTB.showSponsorTOSModal(t,n,{performLogin:void 0===s.performLogin||s.performLogin,userProfile:s.userProfile,partnerKey:s.partnerKey,loginRemotePayload:s.loginRemotePayload}),r.modal("hide")})}).fail(function(e){var t=i.replace("{{message}}",defaults.errorMessages.GENERAL__CONNECT_FAILED+" for retrieving companies list.");r.find(".modal-body").html(t),n.onError&&n.onError(t,r)}),r.modal({})},window.TTB.showSponsorTOSModal=function(o,s,n){var a,i,e,t,r;return n=n||{},a=window.TTB._createDefaultInstance(n.partnerKey,o),e=["Thank you for choosing <br>{{sponsorTitle}} <br> as your partner. <br>",'<p id="ttb-sdk--sponsor-tos-message">Please read and agree to {{sponsorTitle}} <a href="{{sponsorTOSURL}}" target="_blank">Terms and conditions</a></p>'].join(""),r=['<div class="form-group form-check" id="ttb-sdk--sponsor-tos-check">',' <input id="ttb-sdk--sponsor-tos-agree" type="checkbox" class="form-check-input">',' <label class="form-check-label" for="ttb-sdk--sponsor-tos-agree">I hereby agree</label>',"</div>",'<button id="ttb-sdk--sponsor-selection-finish" type="button" class="btn btn-success btn-block" disabled>Finish</button>'].join(""),t=e.replace(/\{\{sponsorTitle}}/g,o.title).replace("{{sponsorTOSURL}}",o.TOSURL),i=window.TTB._modal({id:"ttb-sdk--sponsor-tos-modal",sizeClass:" ",title:t,bodyContent:r}),$("#ttb-sdk--sponsor-tos-agree").on("change",function(){var e=$(this).prop("checked");$("#ttb-sdk--sponsor-selection-finish").prop("disabled",!e)}),$("#ttb-sdk--sponsor-selection-finish").on("click",function(){var e;window.TTB._log(["saveSponsor: called"]),l("Saving Selection...",!0),e=n.userProfile?{data:{User:n.userProfile}}:n.loginRemotePayload,a.saveSponsorSelection(e,!1).then(function(e){"OK"===(e=e.response).status?(window.TTB._log(["saveSponsor: success",e]),l("Selection Saved!",!0),n.userProfile&&(n.loginRemotePayload.stk=e.data.stk,n.loginRemotePayload.getuser_url=e.data.getuser_url),s.onSelect&&s.onSelect(o,n.loginRemotePayload,i),n.performLogin&&(window.TTB._log(["performLogin: called"]),l("Authenticating...",!0),a.loginRemote(n.loginRemotePayload,!1).then(function(e){var t;"OK"===(e=e.response).status?(window.TTB._log(["performLogin: success",e]),window.TTB._log(["TOSAccept: called"]),l("Accepting Terms...",!0),t={method:"GET"},a._ajax(t,methodsMapping.SPONSOR__ACCEPT_TOS).then(function(e){e=e.response,window.TTB._log(["TOSAccept: complete",e]),"OK"===e.status?(window.TTB._log(["TOSAccept: success",e]),s.onConnect&&s.onConnect(o,n.loginRemotePayload,i),l("Connected !",!1)):(window.TTB._log(["TOSAccept: failed",e]),d(e.data.msg))},function(e){window.TTB._log(["TOSAccept: error",e]),d(defaults.errorMessages.GENERAL__CONNECT_FAILED+" for accepting Terms.")})):(window.TTB._log(["performLogin: failed",e]),d(e.data[0]))},function(e){window.TTB._log(["performLogin: error",e]),d(defaults.errorMessages.GENERAL__CONNECT_FAILED+" for login.")}))):(window.TTB._log(["saveSponsor: failed",e]),d(e.data[0]))},function(e){window.TTB._log(["saveSponsor: error",e]),d(defaults.errorMessages.GENERAL__CONNECT_FAILED+" for saving partner.")})}),n.performLogin||($("#ttb-sdk--sponsor-tos-message").hide(),$("#ttb-sdk--sponsor-tos-check").hide(),$("#ttb-sdk--sponsor-selection-finish").prop("disabled",!1)),i.modal({});function l(e,t){$("#ttb-sdk--sponsor-selection-finish").text(e||"").prop("disabled",t)}function d(e){s.onError&&s.onError(e,i)}},window.TTB.renderLogoWidget=function(e,t){var o=window.TTB.utilGenerateLandingPageURL(t),s=['<a class="ttb-sdk--render-logo--link" target="_blank" href="{{landingPageUrl}}" title="Title ToolBox - Full Profile and Net Sheet Report Lookup">',' <img class="ttb-sdk--render-logo--image" src="https://demo.titletoolbox.com/assets/images/logo_in.png" style="background-color: #389ae5;">',"</a>"].join("").replace("{{landingPageUrl}}",o),n=document.querySelector(e);return n.innerHTML+=s,n},window.TTB.utilGenerateLandingPageURL=function(e){var t=window.location.port===defaults.devPortSandbox?"http://localhost:"+defaults.devPortLanding:"https://ttb-landing-page.herokuapp.com";return t+="/?stk={{stk}}&getuser_url={{getuser_url}}&partnerKey={{partnerKey}}&enabled_features={{enabled_features}}&debug={{debug}}".replace("{{stk}}",e.stk).replace("{{getuser_url}}",encodeURIComponent(e.getuser_url)).replace("{{partnerKey}}",e.partnerKey).replace("{{enabled_features}}",defaults.enabledFeatures).replace("{{debug}}",window.TTB.debug)},window.TTB._utilAddSessionToken=function(e){var t=TTB._getLocal(defaults.sessionKeyName);return t&&((e=e||{})[defaults.sessionKeyName]=t),e},window.TTB.utilPromiseReject=function(e){var t=$.Deferred();return t.reject(e),t},window.TTB.utilPromiseResolve=function(e){var t=$.Deferred();return t.resolve(e),t},window.TTB.utilCopy=function(e){return $.extend({},e)},window.TTB.prototype={_log:function(e){this.config.debug&&console.log.apply(console,[defaults.sdkPrefix+" :",this.instanceId.toString(),":"].concat(e))},_fillFields:function(selector,data,clearExisting,delay){var _self,$fields,model,modelValue,fillValue,timeout,_self=this,$fields=$(selector).find("input["+_self.autoFillAttr+"]"),fillValue=delay?(timeout=0,function(e,t){timeout+=delay,setTimeout(function(){e.val(t)},timeout)}):function(e){$(this).val(e)};$fields.each(function(){model=$(this).attr(_self.autoFillAttr),clearExisting&&$(this).val(void 0);try{modelValue=eval("data."+model),modelValue&&fillValue($(this),modelValue)}catch(e){_self._log(["autoFill : ",model,": skipping - invalid model"])}})},_fillField:function(e,t,o){var s=$(e).find("input["+this.autoFillAttr+'="'+t+'"]');s.length?s.val(o):this._log(["autoFill : skipping : field not found - ",t])},_ajax:function(e,t,o){var s;return e.url=e.url||this.baseURL+t.endpoint,(s=$.extend(e,{headers:{"Partner-Key":this.config.partnerKey,"Third-Party":!0},xhrFields:e.xhrFields||{}})).customData={originalUrl:s.url},this._ajaxProceed(s,t,o)},_ajaxProceed:function(t,o,e){var s=this,n={};return n.isPublicAPIMethod=0<=defaults.sessionKeySkippedMethods.indexOf(o.methodName),n.isPublicAPIMethod||(e=TTB._utilAddSessionToken(e)),t.url=t.customData.originalUrl,n.paramsString=e?$.param(e):"",t.url+=n.paramsString?"?"+n.paramsString:"",$.ajax(t).then(function(e){return"string"==typeof e||e instanceof Array||"OK"===(e.response||e).status?s._log([o.methodName+"() [",o.endpoint,"]",": success :",e]):s._log([o.methodName+"() [",o.endpoint,"]",": error :",e]),e},function(e){return s._log([o.methodName+"() [",o.endpoint,"]",": fail :",e]),401!==e.status?e:s._handleSessionExpire(e,t,o)})},_handleSessionExpire:function(o,s,n){var e,a,t,i=this,r={requestConfig:s,requestError:o,methodName:n.methodName,endpoint:n.endpoint};return i.config.onSessionExpire&&i._log(["_handleSessionExpire: Support for onSessionExpire() has been removed after deprecating it in various past versions. Ignoring the passage."]),t=i.config.onSessionExpireV3||i.config.onSessionExpireV2,a={couldNotHandle:"_handleSessionExpire: ERROR - Could not handle.",checkDocs:"Please check documentation for more details."},t?(i._log(["_handleSessionExpire:",n.methodName+"() [",n.endpoint,"]: handling with provided onSessionExpire handler."]),(e=i.config.onSessionExpireV2(r))?e.then(function(e){var t;return i.config.onSessionExpireV2?(t={authMethod:"loginRemote"}).payload=e:t=e,t&&t.authMethod&&t.payload&&(t.payload.uuid||t.payload.stk&&t.payload.getuser_url)?i[t.authMethod](t.payload).then(function(e){return i._log(["_handleSessionExpire: loginRemote: success:"]),i._ajaxProceed(s,n)},function(e){return i._log([a.couldNotHandle,"Could not perform login using provided loginRemotePayload info.",a.checkDocs,e]),o}):(i._log([a.couldNotHandle,"onSessionExpire: Returned promise resolved with invalid authConfig or loginRemotePayload info.",a.checkDocs]),window.TTB.utilPromiseReject(o))},function(e){return i._log([a.couldNotHandle,"onSessionExpire: returned Promise rejected.",a.checkDocs,e]),o}):(i._log([a.couldNotHandle,"Expected a promise in return from onSessionExpireV2()",a.checkDocs]),o)):(i._log([a.couldNotHandle,"Neither config.onSessionExpireV3() nor config.onSessionExpireV2() was provided.",a.checkDocs]),o)},setSponsor:function(e){return this._log(["setSponsor: existing:",this.sponsor&&this.sponsor.name,"| new:",e.name]),window.TTB._setLocal(defaults.localStorageNames.connect__selectedSponsor,e),this.sponsor=e,this.baseURL=this.baseURLPattern.replace("{{sponsorName}}",e.name)},showTOS:function(){var e=['<iframe src="{{src}}" width="100%" height="600px"></iframe>',"</div>"].join("").replace("{{src}}",this.sponsor.TOSURL);return window.TTB._modal({id:"ttb-sdk--sponsor-tos",title:"Terms of Service",bodyContent:e}).modal({})},handleSponsorTOS:function(e){var t;return this.setSponsor(e),t=['<iframe src="{{src}}" width="100%" height="600px"></iframe>',"</div>"].join("").replace("{{src}}",this.sponsor.TOSURL),window.TTB._modal({id:"ttb-sdk--handle-sponsor-tos",title:"Terms of Service",bodyContent:t}).modal({})},loginUUID:function(e){var o=this,t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.AUTH__LOGIN_UUID).then(function(e){var t;return"OK"===e.response.status&&(t=e.response.data[defaults.sessionKeyName],TTB._setLocal(defaults.sessionKeyName,t),o._log(["loginUUID:",defaults.sessionKeyName,"updated in localStorage.",TTB._getLocal(defaults.sessionKeyName)])),e})},loginRemote:function(e){var o=this;e.sso=!1;var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.AUTH__LOGIN_REMOTE).then(function(e){var t;return"OK"===e.response.status&&(t=e.response.data[defaults.sessionKeyName],TTB._setLocal(defaults.sessionKeyName,t),o._log(["loginRemote:",defaults.sessionKeyName,"updated in localStorage.",TTB._getLocal(defaults.sessionKeyName)])),e})},login:function(e){var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.AUTH__LOGIN).then(function(e){var t;return"OK"===e.response.status&&(t=e.response.data[defaults.sessionKeyName],TTB._setLocal(defaults.sessionKeyName,t)),e})},logout:function(){return this._ajax({method:"GET"},methodsMapping.AUTH__LOGOUT)},searchByParcelNumber:function(e){var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.SEARCH_PROPERTY__PARCEL)},searchBySiteAddress:function(e){var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.SEARCH_PROPERTY__ADDRESS)},searchByOwnerName:function(e){var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.SEARCH_PROPERTY__OWNER)},orderReport:function(e){e.output=e.output||"link",e.report_type=e.report_type||"property_profile";var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.REPORT__ORDER)},propertyComps:function(e){var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.PROPERTY__COMPS)},propertyDetails:function(e,t){var o=this;t=t||{autoFillContext:null};var s={method:"POST",data:JSON.stringify(e)};return this._ajax(s,methodsMapping.PROPERTY__DETAILS).then(function(e){return t.autoFillContext&&o._fillFields(t.autoFillContext,e.response.data,t.autoFillClearExisting,t.autoFillDelay),e})},checkPEFarmStatus:function(e){var t={method:"GET",url:(this.baseURL+methodsMapping.FARM__PE__CHECK_STATUS.endpoint).replace("{{farmId}}",e)};return this._ajax(t,methodsMapping.FARM__PE__CHECK_STATUS)},getFarmProperties:function(e){var t={method:"GET",url:(this.baseURL+methodsMapping.FARM__GET_DETAILS.endpoint).replace("{{farmId}}",e)};return this._ajax(t,methodsMapping.FARM__GET_DETAILS)},getFarmsList:function(){return this._ajax({method:"GET"},methodsMapping.FARM__GET_LIST)},globalSearch:function(e,t){var o={method:"POST",data:JSON.stringify(e)};return this._ajax(o,methodsMapping.GLOBAL_SEARCH__PROPERTIES,t)},globalSearchCount:function(e){var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.GLOBAL_SEARCH__COUNT)},nearbySearch:function(e,t){var o={limit:e.limit||1e3,page:1},s={mm_fips_state_code:e.mm_fips_state_code,use_code_std:["RSFR","RCON"],customFilters:{},searchOptions:{max_limit:e.limit||void 0},geometry:{match:"circle",value:{center_lat:e.center_lat,center_lng:e.center_lng,radius:e.radius}}},s=$.extend(s,t),n={method:"POST",data:JSON.stringify(s)};return this._ajax(n,methodsMapping.GLOBAL_SEARCH__PROPERTIES,o)},getTypesReport:function(){return this._ajax({method:"GET"},methodsMapping.REPORT__GET_TYPES)},getSearchFields:function(){return this._ajax({method:"GET"},methodsMapping.GLOBAL_SEARCH__FIELDS)},saveSponsorSelection:function(e,t){var o={method:"POST",data:JSON.stringify(e)},s={save_and_login:!!t};return this._ajax(o,methodsMapping.SPONSOR__SAVE_SELECTION,s)},clearSponsorSelection:function(e){var t={method:"POST",data:JSON.stringify(e)};return this._ajax(t,methodsMapping.SPONSOR__CLEAR_SELECTION)},openNetSheet:function(e,t){var o={id:"ttb-sdk--net-sheet--modal",title:"Net Sheet"},s=(0<=[defaults.devPortSandbox,defaults.devPortLanding].indexOf(window.location.port)&&defaults.devPortExport,{id:"ttb-sdk--net-sheet--iframe",height:"635px",origin:"https://ttb-export.herokuapp.com",pathname:"/netsheet",params:{partnerKey:this.config.partnerKey,verticalName:this.sponsor.name,verticalTitle:this.sponsor.title,propertyId:e,propertyAddress:t,debug:this.debug,TTBSID:TTB._getLocal(defaults.sessionKeyName)}});return this._log(["openNetSheet : options built :",s,o]),window.TTB.utilIframeModal(o,s)},googleBuildAddress:function(e,t){for(var o,s,n,a={},i={street_number:{field_name:"site_street_number",name_type:"short_name"},route:{field_name:"site_route",name_type:"short_name"},locality:{field_name:"site_city",name_type:"long_name"},neighborhood:{field_name:"site_neighborhood",name_type:"long_name"},administrative_area_level_1:{field_name:"site_state",name_type:"short_name"},administrative_area_level_2:{field_name:"site_county",name_type:"short_name"},postal_code:{field_name:"site_zip",name_type:"short_name"}},r=e.getPlace(),l=0,d=r.address_components.length;l<d;l++)i[s=(o=r.address_components[l]).types[0]]&&(n=o[i[s].name_type],a[i[s].field_name]=n,t&&t.autoFillContext&&this._fillField(t.autoFillContext,i[s].field_name,n));return(a.site_street_number||a.site_route)&&(a.site_address=(a.site_street_number||"")+(a.site_street_number&&a.site_route?" ":"")+(a.site_route||"")),a.site_county=a.site_county?a.site_county.replace(" County",""):void 0,a},instantLookupWidget:function(i,o){var r,t,a,l=this;if(o=o||{},a={},(r={tableOptions:{containerSelector:".ttb-sdk--instant-lookup--list",onInit:void 0,onSelect:void 0,columns:[{label:"Address",fieldName:"customAddress"},{label:"Unit",fieldName:"v_unit"},{label:"Apn",fieldName:"sa_parcel_nbr_primary"},{label:"City",fieldName:"customCity"},{label:"Zip",fieldName:"sa_site_zip"},{label:"Mail State",fieldName:"sa_mail_state"},{label:"Owner name",fieldName:"formatted_sa_owner_1"}]}}).selectedAction=window.TTB._getLocal("selectedAction",r.selectedAction)||{name:"fullProfileReport",label:"Full Profile Report"},r.widgetClass="ttb-sdk--instant-lookup--container",r.widgetTemplate=["\x3c!-- the wait spinner box --\x3e",'<div class="col-xs-12">',' <i class="ttb-sdk--spinner"></i>',"</div>","\x3c!-- the google autocomplete address lookup --\x3e",'<div id="ttb-sdk--instant-lookup--address" class="col-xs-12 col-md-7">',' <div class="">1 - Type in and select the property address below</div>',' <div class="ttb-sdk--instant-lookup--auto-complete-wrapper">','  <input type="text" class="form-control" id="ttb-sdk--instant-lookup--auto-complete" name="ttb-sdk--instant-lookup--auto-complete" placeholder="Search for an address...">'," </div>",' <i class="ttb-sdk--icon--right-arrow"></i>',' <div class="ttb-sdk--instant-lookup--footer">'," (If this is a Condo, APT, or other Multi Unit, please do not enter the unit #. It will ask you for it after you enter the address.)</div>"," </div>","</div>","\x3c!-- actions menu --\x3e",'<div id="ttb-sdk--instant-lookup--actions" class="col-xs-12 col-md-5">',' <div class="">2 - Select the type of report you want below</div>'," \x3c!-- split button --\x3e",' <div class="btn-group col-xs-12">',"  <ul>",'  <li><a data-action-name="netSheet" href="javascript:">NetSheet</a></li>','  <li><a data-action-name="fullProfileReport" href="javascript:">Full Profile Report</a></li>',"  </ul>"," </div>","</div>","\x3c!-- help tip ! --\x3e",'<div id="ttb-sdk--instant-lookup--alert" class="col-xs-12 text-center">',' <div class="alert alert-warning" style="border: 1px solid;">',' Looks like you have not allowed popups for our site, yet. You can click <a href="javascript:" target="_blank">here</a> to get your report.'," </div>","</div>","\x3c!-- multiple matched properties list - [conditional] ! --\x3e",'<div class="col-xs-12 ttb-sdk--instant-lookup--list">',"</div>","\x3c!-- widget footer ! --\x3e",'<div class="col-xs-12 ttb-sdk--instant-lookup--footer text-center">',' <i class="ttb-sdk--icon--info"></i>'," Your report will automatically be created and displayed for you.","</div>"].join("").replace("{{selectedActionLabel}}",r.selectedAction.label),r.$container=$(i),!r.$container.length)return this._log(["instantLookupWidget : abort : element not found - ",i]),null;r.$container.addClass(r.widgetClass).append(r.widgetTemplate),window.TTB.scopedBootstrap&&r.$container.addClass(defaults.classScopedBootstrap).addClass(defaults.classScopedBootstrapBody),r.$multipleMatchContainer=$(r.tableOptions.containerSelector),window.TTB.utilLoadDataTable();try{google.maps.places.Autocomplete}catch(e){return this._log(['instantLookupWidget : abort : "google.maps.places.Autocomplete" not found -'," please make sure the google script was loaded and that instantLookupWidget() is being called inside/after google load cb is "," called i.e. googleInit() or the mentioned callback=* in the google script src value."]),null}function d(){$("#ttb-sdk--instant-lookup--alert").hide().find("a").attr("href","javascript:")}function c(){l._log(["instantLookupWidget: resetMultipleMatchListView called."]),a.dataTable&&a.dataTable.destroy(!0),a.dataTable=null,r.$multipleMatchContainer.empty()}function p(e,t){switch(e.customFullAddress=window.TTB.utilBuildFullAddress(e),r.selectedAction.name){case"netSheet":l._log(["instantLookupWidget : selectedAction: netSheet"]),n=e,a=t,l.openNetSheet(n.sa_property_id,n.customFullAddress),a(),u(!0,{message:"Net Sheet Opened."});break;case"fullProfileReport":l._log(["instantLookupWidget : selectedAction: fullProfileReport"]),o=e,s=t,l.orderReport({sa_property_id:o.sa_property_id,state_county_fips:o.mm_fips_state_code+o.mm_fips_muni_code,report_type:"property_profile",output:"link"}).then(function(e){var t=e.response.data.report.link;window.open(t)||$("#ttb-sdk--instant-lookup--alert").show().find("a").attr("href",t),s(),u(!0,{reportLink:t})},function(){var e="Failed in getting full profile report.";alert(e),s(),u(!1,{message:e})});break;default:l._log(["instantLookupWidget : selectedAction: action not found - ",i]),t()}var o,s,n,a}function u(e,t){o[r.selectedAction.name]&&o[r.selectedAction.name]({success:e,data:t})}(t={}).$element=r.$container.find("#ttb-sdk--instant-lookup--auto-complete"),t.instance=new google.maps.places.Autocomplete(t.$element[0],{types:["geocode"]}),t.instance.addListener("place_changed",function(){l._log(["instantLookupWidget: place_changed called."]),d(),c(),r.selectedAddressInfo=l.googleBuildAddress(t.instance)}),r.$actions=r.$container.find("#ttb-sdk--instant-lookup--actions li"),r.$container.find("#ttb-sdk--instant-lookup--actions ul").on("click","li",function(e){(function(e){r.selectedAction.name=$(e.target).data("action-name"),window.TTB._setLocal("selectedAction",r.selectedAction)})(e),function(){var o,s,n;if(d(),c(),!r.selectedAddressInfo)return t.$element.focus();s=function(){r.$container.find(".ttb-sdk--spinner").removeClass("active"),t.$element.prop("disabled",!1),r.$actions.removeClass("ttb-sdk--disabled-link")},n=function(e){l._log(["instantLookupWidget : searchBySiteAddress - handleError - ",e]),s(),alert("TTB - Lookup Failed. \nReason: "+e),u(!1,{message:e})},(o=function(){r.$container.find(".ttb-sdk--spinner").addClass("active"),t.$element.prop("disabled",!0),r.$actions.addClass("ttb-sdk--disabled-link")})(),l.searchBySiteAddress(r.selectedAddressInfo).then(function(e){var t;if(l._log(["instantLookupWidget : searchBySiteAddress - complete - ",e]),"OK"===(e=e.response).status&&e.data&&e.data.length){if(1<e.data.length)return t=e.data.map(function(e){return e.customAddress=e.sa_site_house_nbr+" "+TTB.utilCapitalize(e.sa_site_street_name),e.customCity=TTB.utilCapitalize(e.sa_site_city),e}),r.tableOptions.onInit=function(e){a.datatable=e,s()},r.tableOptions.onSelect=function(e){o(),p(e,s)},window.TTB.utilRenderTable(t,r.tableOptions),void l._log(["instantLookupWidget : match count:",t.length]);p(e.data[0],s)}else n(e.data?e.data[0]:"Failed in property lookup.")},function(){n(defaults.errorMessages.GENERAL__CONNECT_FAILED+".")})}()})},connectWidget:function(s,o){var n,a={};if(a.$container=$(s.elementSelector),!a.$container.length)return this._log(["connectWidget : abort : element not found - ",s.elementSelector]),null;function e(){var o,e,t;n._log(["connectWidget: onSelectConnection: init."]),e={id:"ttb-sdk--connect--modal",title:"Connect with TitleToolbox"},t={id:"ttb-sdk--connect--iframe",height:"635px",origin:window.location.port===defaults.devPortSandbox?"http://localhost:"+defaults.devPortLanding:"https://ttb-landing-page.herokuapp.com",pathname:"/index.html",params:{stk:s.loginRemotePayload.stk,getuser_url:s.loginRemotePayload.getuser_url,partnerKey:n.config.partnerKey,debug:n.debug},onMessage:function(e,t){if(n._log(["connectWidget: onMessage",e]),-1===e.action.indexOf("TTB:SDK::CONNECT_WIDGET"))return;switch(o.modal("hide"),e.action){case"TTB:SDK::CONNECT_WIDGET:ERROR":i(e.info.reason,!1);break;case"TTB:SDK::CONNECT_WIDGET:SUCCESS":r(e.info,!0);break;default:return void n._log(["connectWidget: onMessage: unknown action",e.action])}}},o=window.TTB.utilIframeModal(e,t)}function i(e,t){l(e,t),o.onConnectFailure&&o.onConnectFailure(e)}function r(e,t){n.setSponsor(e.selectedSponsor),a.$container.find("#ttb-sdk--connect--select-section").hide().next("#ttb-sdk--connect--change-section").show().find("#ttb-sdk--connect--company-name").text(n.sponsor.title||""),l("Partner selected.",!0),o.onConnectSuccess&&o.onConnectSuccess({selectedSponsor:n.sponsor,loginPerformed:t})}function l(e,t){a.$container.find("#ttb-sdk--connect--alert").text(e||"").next("#ttb-sdk--connect--connect").find("button").prop("disabled",t)}n=this,o=o||{},a.userProfile=void 0,a.widgetClass="ttb-sdk--connect--container",a.widgetTemplate=['<div id="ttb-sdk--connect--select-section" class="row">',' <div id="ttb-sdk--connect--alert" class="col-xs-9">',defaults.errorMessages.CONNECT__NO_SPONSOR," </div>",' <div id="ttb-sdk--connect--connect" class="col-xs-3">','  <button type="button" class="btn btn-primary pull-right">Connect</button>'," </div>","</div>","\x3c!-- hidden by default --\x3e",'<div id="ttb-sdk--connect--change-section" class="row" style="display: none;">',' <div class="col-xs-4">',"  <strong>Title company</strong>"," </div>"," \x3c!-- to be dynamically updated --\x3e",' <div id="ttb-sdk--connect--company-name" class="col-xs-4">',"  - "," </div>",' <div id="ttb-sdk--connect--change" class="col-xs-4">','  <button type="button" class="btn btn-primary pull-right">Change</button>'," </div>","</div>"].join(""),a.$container.addClass(a.widgetClass).append(a.widgetTemplate),window.TTB.scopedBootstrap&&a.$container.addClass(defaults.classScopedBootstrap).addClass(defaults.classScopedBootstrapBody),l("Pulling user profile...",!0),window.TTB.getUserProfile(s.loginRemotePayload,n.config.partnerKey).then(function(e){var t;e.data&&e.data.User?(a.userProfile=e.data.User,l("Checking current partner selection...",!0),t={email:a.userProfile.email},window.TTB.getSponsorSelection(n.config.partnerKey,t).then(function(e){"OK"===(e=e.response).status?r({selectedSponsor:window.TTB.utilBuildSponsorInfo(e.data)},!1):i(0<=e.data[0].indexOf("RC_ERR_105")?defaults.errorMessages.CONNECT__NO_SPONSOR:e.data[0],!1)},function(e){i(defaults.errorMessages.GENERAL__CONNECT_FAILED+" for pulling partner selection.",!1)})):i("Failed in pulling user profile.",!0)},function(e){i(defaults.errorMessages.GENERAL__CONNECT_FAILED+" for pulling user profile.",!0)}),a.$container.find("#ttb-sdk--connect--select-section button").on("click",e),a.$container.find("#ttb-sdk--connect--change-section button").on("click",function(){n._log(["connectWidget: onChangeConnection: called."]),e()})}}}();